# 小学四则运算题目生成器

一款支持大规模题目生成、答案检查的命令行工具，符合小学四则运算教学需求，支持真分数、带分数运算，确保题目无重复且运算合法。

## 一、环境准备

- **Python 版本**：Python 3.8+
- **依赖安装**：需安装`snakeviz`库，此外均使用 Python 标准库（`argparse`/`unittest`等）

## 二、快速开始

### 1. 生成题目

通过`-n`指定题目数量，`-r`指定数值范围（必须同时使用），题目和答案自动保存到当前目录的`Exercises.txt`和`Answers.txt`。

#### 示例 1：生成 10 道 10 以内的题目

```bash
python Math.py -n 10 -r 10
```

#### 示例 2：生成 10000 道 20 以内的题目（支持大规模生成）

```bash
python Math.py -n 10000 -r 20
```

### 2. 检查答案

通过`-e`指定题目文件路径，`-a`指定答案文件路径，评分结果保存到`Grade.txt`。

#### 示例：检查 Exercises.txt 和 Answers.txt 的对错

```bash
python Math.py -e Exercises.txt -a Answers.txt
```

## 三、参数说明

| 参数 | 作用                                         | 必需           | 示例                    |
| ---- | -------------------------------------------- | -------------- | ----------------------- |
| `-n` | 指定生成题目的数量                           | 是（生成模式） | `-n 100`（生成 100 题） |
| `-r` | 指定数值范围（自然数 / 真分数分母均 < 此值） | 是（生成模式） | `-r 20`（20 以内）      |
| `-e` | 指定题目文件路径                             | 是（检查模式） | `-e Exercises.txt`      |
| `-a` | 指定答案文件路径                             | 是（检查模式） | `-a Answers.txt`        |

## 四、文件说明

| 文件名          | 作用               | 格式示例                               |
| --------------- | ------------------ | -------------------------------------- |
| `Exercises.txt` | 生成的题目文件     | `3'1/2 + 1/3 = `、`(2 ÷ 5) × 3 =`      |
| `Answers.txt`   | 对应的标准答案文件 | `3'5/6`、`6/5`（注：除法结果为真分数） |
| `Grade.txt`     | 答案检查结果文件   | `Correct: 2 (1,3)`、`Wrong: 1 (2)`     |

## 五、核心特性

1. **运算合法性**：减法结果非负，除法结果为真分数，符合小学教学要求。
2. **题目不重复**：交换`+`/`×`左右表达式视为重复（如`1+2`与`2+1`不重复生成）。
3. **大规模支持**：1 万题生成时间约 20 秒，无卡死，内存占用可控。
4. **分数支持**：支持真分数（如`3/5`）、带分数（如`2'3/8`）的输入输出与运算。

## 六、常见问题

1. **生成题目数量不足**：提示 “只生成了 X 个题目”，可能是`-r`范围过小（如`-r 2`），建议增大范围（如`-r 10`）。
2. **文件编码错误**：确保所有文件以 UTF-8 编码保存，避免中文乱码。
3. **答案检查报错 “数量不一致”**：题目文件和答案文件的行数需相同，每行对应一道题和一个答案。

## 七、测试运行

执行测试代码，验证程序正确性：

```bash
python -m unittest Test.py -v
```

所有测试用例显示`OK`即为通过，确保程序符合所有需求。

## 八、性能分析

有关`Math.py`和`Bad_math.py`的性能分析文件已给出，可以通过进行可视化的性能分析：

```bash
Snakeviz Math.prof
```

